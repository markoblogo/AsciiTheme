(function(o,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.AsciiTheme={}))})(this,(function(o){"use strict";const s=document.documentElement;function T(){return s}function y(t,e=document){return Array.from(e.querySelectorAll(t))}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function S(t){try{const e=localStorage.getItem(t);if(!e)return{};const i=JSON.parse(e);if(!i||typeof i!="object")return{};const n=i;return{style:n.style==="ascii"?"ascii":n.style==="default"?"default":void 0,mode:n.mode==="dark"?"dark":n.mode==="light"?"light":void 0}}catch{return{}}}function v(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch{}}const l="asciiOriginalHtml",f="data-ascii-sticker-rendered",$="pre.ascii-sticker";function M(t,e=2){const i=t.replace(/\s+/g," ").trim(),n=`${" ".repeat(e)}${i}${" ".repeat(e)}`,A=`┌${"─".repeat(n.length)}┐`,w=`│${n}│`,C=`└${"─".repeat(n.length)}┘`;return`${A}
${w}
${C}`}function E(t){t.dataset[l]||(t.dataset[l]=t.innerHTML);const e=(t.getAttribute("data-ascii-sticker")||"").trim();if(!e)return;const i=t.querySelector($);if(t.getAttribute(f)==="1"&&i){i.textContent=M(e);return}t.innerHTML="";const n=document.createElement("pre");n.className="ascii-sticker",n.textContent=M(e),t.matches("button, a, [role='button']")&&t.setAttribute("aria-label",e),t.appendChild(n),t.setAttribute(f,"1")}function R(t){const e=t.dataset[l];e!==void 0&&(t.innerHTML=e,t.removeAttribute(f))}function b(t=document){const e=y("[data-ascii-sticker]",t);for(const i of e)E(i)}function O(t=document){const e=y("[data-ascii-sticker]",t);for(const i of e)R(i)}const d={storageKey:"ascii_theme_v1",defaultStyle:"default",managedMode:!1,defaultMode:"light",themeAttr:"data-theme"};let r={...d};const a=T();function u(t){return t==="ascii"?"ascii":"default"}function c(t){return t==="dark"?"dark":"light"}function L(t){if(!r.managedMode){a.removeAttribute("data-ascii-mode");return}const e=c(t??r.defaultMode);a.setAttribute("data-ascii-mode",e)}function h(t,e){const i=S(r.storageKey);v(r.storageKey,{...i,style:t,mode:r.managedMode?e:void 0})}function g(t){const e=u(t);a.setAttribute("data-style",e),e==="ascii"?b(document):O(document);const i=r.managedMode?c(a.getAttribute("data-ascii-mode")):void 0;return h(e,i),e}function _(t={}){const e=t.managedMode??d.managedMode,i=t.defaultMode?c(t.defaultMode):e?p():d.defaultMode;r={...d,...t,managedMode:e,defaultStyle:u(t.defaultStyle??d.defaultStyle),defaultMode:i};const n=S(r.storageKey),A=u(n.style??r.defaultStyle);return r.managedMode?L(n.mode??r.defaultMode):a.removeAttribute("data-ascii-mode"),g(A)}function H(t){return g(t)}function I(){const t=m();return g(t==="ascii"?"default":"ascii")}function m(){return u(a.getAttribute("data-style"))}function k(t){if(!r.managedMode)return c(a.getAttribute(r.themeAttr));const e=c(t);return a.setAttribute("data-ascii-mode",e),h(m(),e),e}function N(){if(!r.managedMode)return c(a.getAttribute(r.themeAttr));const t=c(a.getAttribute("data-ascii-mode"));return k(t==="dark"?"light":"dark")}function j(t=document){b(t)}o.getAsciiStyle=m,o.initAsciiTheme=_,o.renderAsciiStickers=j,o.setAsciiMode=k,o.setAsciiStyle=H,o.toggleAsciiMode=N,o.toggleAsciiStyle=I,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})}));
