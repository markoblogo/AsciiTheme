(function(o,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.AsciiTheme={}))})(this,(function(o){"use strict";const s=document.documentElement;function p(){return s}function h(t,e=document){return Array.from(e.querySelectorAll(t))}function v(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function S(t){try{const e=localStorage.getItem(t);if(!e)return{};const i=JSON.parse(e);if(!i||typeof i!="object")return{};const n=i;return{style:n.style==="ascii"?"ascii":n.style==="default"?"default":void 0,mode:n.mode==="dark"?"dark":n.mode==="light"?"light":void 0}}catch{return{}}}function $(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch{}}const l="asciiOriginalHtml",m="data-ascii-sticker-rendered",E="pre.ascii-sticker";function M(t,e=2){const i=t.replace(/\s+/g," ").trim(),n=`${" ".repeat(e)}${i}${" ".repeat(e)}`,y=`┌${"─".repeat(n.length)}┐`,u=`│${n}│`,C=`└${"─".repeat(n.length)}┘`;return`${y}
${u}
${C}`}function R(t){t.dataset[l]||(t.dataset[l]=t.innerHTML);const e=(t.getAttribute("data-ascii-sticker")||"").trim();if(!e)return;const i=t.querySelector(E);if(t.getAttribute(m)==="1"&&i){i.textContent=M(e);return}t.innerHTML="";const n=document.createElement("pre");n.className="ascii-sticker",n.textContent=M(e),t.matches("button, a, [role='button']")&&t.setAttribute("aria-label",e),t.appendChild(n),t.setAttribute(m,"1")}function O(t){const e=t.dataset[l];e!==void 0&&(t.innerHTML=e,t.removeAttribute(m))}function b(t=document){const e=h("[data-ascii-sticker]",t);for(const i of e)R(i)}function L(t=document){const e=h("[data-ascii-sticker]",t);for(const i of e)O(i)}const d={storageKey:"ascii_theme_v1",defaultStyle:"default",managedMode:!1,defaultMode:"light",themeAttr:"data-theme"};let r={...d};const a=p();function f(t){return t==="ascii"?"ascii":"default"}function c(t){return t==="dark"?"dark":"light"}function _(t){if(!r.managedMode){a.removeAttribute("data-ascii-mode");return}const e=c(t??r.defaultMode);a.setAttribute("data-ascii-mode",e)}function k(t,e){const i=S(r.storageKey);$(r.storageKey,{...i,style:t,mode:r.managedMode?e:void 0})}function g(t){const e=f(t);a.setAttribute("data-style",e),e==="ascii"?b(document):L(document);const i=r.managedMode?c(a.getAttribute("data-ascii-mode")):void 0;return k(e,i),e}function H(t={}){const e=t.managedMode??d.managedMode,i=t.defaultMode?c(t.defaultMode):e?v():d.defaultMode;r={...d,...t,managedMode:e,defaultStyle:f(t.defaultStyle??d.defaultStyle),defaultMode:i};const n=S(r.storageKey),y=f(n.style??r.defaultStyle);if(r.managedMode)_(n.mode??r.defaultMode);else if(a.removeAttribute("data-ascii-mode"),r.themeAttr!=="data-theme"){const u=a.getAttribute(r.themeAttr);(u==="light"||u==="dark")&&a.setAttribute("data-theme",u)}return g(y)}function I(t){return g(t)}function N(){const t=A();return g(t==="ascii"?"default":"ascii")}function A(){return f(a.getAttribute("data-style"))}function T(t){if(!r.managedMode)return c(a.getAttribute(r.themeAttr));const e=c(t);return a.setAttribute("data-ascii-mode",e),k(A(),e),e}function j(){if(!r.managedMode)return c(a.getAttribute(r.themeAttr));const t=c(a.getAttribute("data-ascii-mode"));return T(t==="dark"?"light":"dark")}function w(t=document){b(t)}o.getAsciiStyle=A,o.initAsciiTheme=H,o.renderAsciiStickers=w,o.setAsciiMode=T,o.setAsciiStyle=I,o.toggleAsciiMode=j,o.toggleAsciiStyle=N,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})}));
