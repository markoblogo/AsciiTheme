(function(o,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.AsciiTheme={}))})(this,(function(o){"use strict";const s=document.documentElement;function b(){return s}function A(t,e=document){return Array.from(e.querySelectorAll(t))}function T(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function y(t){try{const e=localStorage.getItem(t);if(!e)return{};const i=JSON.parse(e);if(!i||typeof i!="object")return{};const r=i;return{style:r.style==="ascii"?"ascii":r.style==="default"?"default":void 0,mode:r.mode==="dark"?"dark":r.mode==="light"?"light":void 0}}catch{return{}}}function p(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch{}}const l="asciiOriginalHtml";function M(t,e=2){const i=t.replace(/\s+/g," ").trim(),r=`${" ".repeat(e)}${i}${" ".repeat(e)}`,g=`┌${"─".repeat(r.length)}┐`,R=`│${r}│`,j=`└${"─".repeat(r.length)}┘`;return`${g}
${R}
${j}`}function v(t){t.dataset[l]||(t.dataset[l]=t.innerHTML);const e=(t.getAttribute("data-ascii-sticker")||"").trim();if(!e)return;const i=t.firstElementChild;if(i&&i.tagName==="PRE"&&i.classList.contains("ascii-sticker")&&t.childElementCount===1){i.textContent=M(e);return}t.innerHTML="";const r=document.createElement("pre");r.className="ascii-sticker",r.textContent=M(e),t.matches("button, a, [role='button']")&&t.setAttribute("aria-label",e),t.appendChild(r)}function $(t){const e=t.dataset[l];e!==void 0&&(t.innerHTML=e)}function S(t=document){const e=A("[data-ascii-sticker]",t);for(const i of e)v(i)}function L(t=document){const e=A("[data-ascii-sticker]",t);for(const i of e)$(i)}const d={storageKey:"ascii_theme_v1",defaultStyle:"default",managedMode:!1,defaultMode:"light",themeAttr:"data-theme"};let n={...d};const a=b();function u(t){return t==="ascii"?"ascii":"default"}function c(t){return t==="dark"?"dark":"light"}function O(t){if(!n.managedMode){a.removeAttribute("data-ascii-mode");return}const e=c(t??n.defaultMode);a.setAttribute("data-ascii-mode",e)}function h(t,e){const i=y(n.storageKey);p(n.storageKey,{...i,style:t,mode:n.managedMode?e:void 0})}function f(t){const e=u(t);a.setAttribute("data-style",e),e==="ascii"?S(document):L(document);const i=n.managedMode?c(a.getAttribute("data-ascii-mode")):void 0;return h(e,i),e}function E(t={}){const e=t.managedMode??d.managedMode,i=t.defaultMode?c(t.defaultMode):e?T():d.defaultMode;n={...d,...t,managedMode:e,defaultStyle:u(t.defaultStyle??d.defaultStyle),defaultMode:i};const r=y(n.storageKey),g=u(r.style??n.defaultStyle);return n.managedMode?O(r.mode??n.defaultMode):a.removeAttribute("data-ascii-mode"),f(g)}function C(t){return f(t)}function H(){const t=m();return f(t==="ascii"?"default":"ascii")}function m(){return u(a.getAttribute("data-style"))}function k(t){if(!n.managedMode)return c(a.getAttribute(n.themeAttr));const e=c(t);return a.setAttribute("data-ascii-mode",e),h(m(),e),e}function I(){if(!n.managedMode)return c(a.getAttribute(n.themeAttr));const t=c(a.getAttribute("data-ascii-mode"));return k(t==="dark"?"light":"dark")}function N(t=document){S(t)}o.getAsciiStyle=m,o.initAsciiTheme=E,o.renderAsciiStickers=N,o.setAsciiMode=k,o.setAsciiStyle=C,o.toggleAsciiMode=I,o.toggleAsciiStyle=H,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})}));
